--Creacion de la tabla con mi nombre

CREATE TABLE DARE_USUARIO(
    COD_USUARIO NUMBER,
    NOMBRE_USUARIO VARCHAR(25),
    APELLIDO1_USUARIO  VARCHAR (25),
    APELLIDO2_USUARIO VARCHAR (25),
    CONSTRAINT PK_DAMIAN_RODRIGUEZ PRIMARY KEY (COD_USUARIO)
);

INSERT INTO DAMIAN_RODRIGUEZ(COD_USUARIO, NOMBRE_USUARIO, APELLIDO1_USUARIO, APELLIDO2_USUARIO)
    VALUES (1,"DAMIAN", "RODRIGUEZ", "ENCINA")





---- Creacion del prosedimiento para insertar datos
CREATE OR REPLACE PROCEDURE DARE_CARGA_USURIOS(
    COD_USUARIO_P NUMBER,
    NOMBRE_USUARIO_P VARCHAR2,
    APELLIDO1_USUARIO_P VARCHAR2,
    APELLIDO2_USUARIO_P VARCHAR2
) 
IS 
BEGIN
    INSERT INTO DARE_USUARIO(COD_USUARIO, NOMBRE_USUARIO, APELLIDO1_USUARIO, APELLIDO2_USUARIO)
    VALUES (COD_USUARIO_P, NOMBRE_USUARIO_P, APELLIDO1_USUARIO_P, APELLIDO2_USUARIO_P);
END;

---EJECUCION DE PA, ESTA SUJENTOA UN BLOQUE
-- Ejecucion del prosedimiento

BEGIN
    DARE_CARGA_USUARIOS(2, 'CARLOS', 'CASTRO', 'BUSTAMANTE');
    DARE_CARGA_USUARIOS(3, 'MACARENA', 'URBINA', 'FIGUEROA');
    DARE_CARGA_USUARIOS(4, 'MARCELA', 'PEREZ', 'BASTIAS');
    DARE_CARGA_USUARIOS(5, 'DAMIAN', 'RODRIGUEZ', 'ENCINA');
END;





---------------------------------TAREA--------------------------------------------

-- SE SOLICITA UN PROCEDIMIENTO ALMACENADO QUE SE ENCARGUE DE MODIFICAR EL NOMBRE
-- Y LOS APELLIDOS DE LOS USUARIOS DE ACUERDO A SU CÓDIGO, DE NOMBRE 
-- MODIFICA_USUARIOS




CREATE OR REPLACE PROCEDURE DARE_MODIFICA_USUARIOS(
    NOMBRE_USUARIO_P      VARCHAR2,
    APELLIDO1_USUARIO_P   VARCHAR2,
    APELLIDO2_USUARIO_P   VARCHAR2,
    COD_USUARIO_P         NUMBER
)
IS
BEGIN
    UPDATE DARE_USUARIO
    SET NOMBRE_USUARIO     = NOMBRE_USUARIO_P,
        APELLIDO1_USUARIO  = APELLIDO1_USUARIO_P,
        APELLIDO2_USUARIO  = APELLIDO2_USUARIO_P
    WHERE COD_USUARIO = COD_USUARIO_P;
END;



----Ejecucion

BEGIN
	DARE_MODIFICA_USUARIOS('JUAN','PEREZ','REYES',1);
END;




-- SE SOLICITA UN PROCEDIMIENTO ALMACENADO QUE SE ENCARGUE DE ELIMINAR USUARIOS
-- DE ACUERDO A SU CÓDIGO, DE NOMBRE ELIMINA_USUARIOS

CREATE OR REPLACE PROCEDURE DARE_ELIMINA_USUARIOS(
    COD_USUARIO_P NUMBER
)
IS
BEGIN
    DELETE FROM DARE_USUARIO
    WHERE COD_USUARIO = COD_USUARIO_P;
END;


---Ejecucion

BEGIN
	DARE_ELIMINA_USUARIOS(1);
END;
